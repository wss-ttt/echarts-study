<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #main {
        width: 400px;
        height: 400px;
        margin: 100px auto;
        background: #ccc;
      }
    </style>
  </head>

  <body>
    <div id="main"></div>
    <script src="js/echarts.min.js"></script>
    <script>
      var myChart = echarts.init(document.getElementById('main'))
      var xData = ['一', '二', '三', '四', '五', '六', '七']
      var yData = [100, 82, 80, 70, 65, 66, 40]
      // 1.需要复制一份数据(和无缝滚动给的原理一样)
      var newXData = xData.concat(xData) // x轴数据复制一份
      var newYData = yData.concat(yData) // y轴数据复制一份
      // 2.需要显示的个数
      let start = 0,
        end = 4
      // 3.初始化图表
      initChart(newXData.slice(start, end), newYData.slice(start, end))
      // 4.自动播放
      setInterval(autoPlay, 1000)
      // 5.封装自动轮播方法
      function autoPlay() {
        let xT = newXData.slice(start, end)
        let yT = newYData.slice(start, end)
        initChart(xT, yT)
        start++
        end++
        if (start === xData.length) { // 临界值的判断和轮播、滑动一样的
          start = 0
          end = 4
        }
      }
      // 6.封装初始化图表方法
      function initChart(xData, yData) {
        var option = {
          color: ['#3398DB'],
          tooltip: {
            trigger: 'axis',
            axisPointer: {
              // 坐标轴指示器，坐标轴触发有效
              type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            }
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
          },
          yAxis: [
            {
              type: 'value'
            }
          ],
          xAxis: [
            {
              type: 'category',
              data: xData
            }
          ],
          series: [
            {
              name: '直接访问',
              type: 'bar',
              barWidth: '60%',
              data: yData
            }
          ]
        }
        myChart.setOption(option)
      }
    </script>
  </body>
</html>
