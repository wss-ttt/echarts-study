<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			html,
			body {
				height: 100%;
			}
			
			.box {
				height: 100%;
			}
			
			#main {
				height: 100%;
			}
		</style>
	</head>

	<body>
		<div class="box">
			<div id="main"></div>
		</div>
	</body>
	<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var myChart = echarts.init(document.getElementById('main'));
		$.get('mapdata/china.json', function(geoJson) {
			console.log('geoJson',geoJson);
			echarts.registerMap('china', geoJson);
			// 所有省份信息
			var mapData = geoJson.features.map(function(item) {
				return {
					name: item.properties.name,
					value: item.properties.childNum,
					cp: item.properties.cp,
				}
			});
			console.log('mapData',mapData);
			// value 指定圆点的大小
			var data = [{
					name: '四川',
					value: 20057.34
				},
				{
					name: '重庆',
					value: 15477.48
				},
				{
					name: '云南',
//					value: 31686.1
					value:40000
				},
				{
					name: '贵州',
					value: 6992.6
				},
				{
					name: '湖南',
//					value: 44045.49
					value:40000
				},
				{
					name: '湖北',
					value: 40689.64
				},
				{
					name: '陕西',
					value: 37659.78
				}
			];
			const max = 100000,
				min = 900; // todo
			const maxSize4Pin = 100,
				minSize4Pin = 20;
			var areaValue = data;
			console.log('areaValue',areaValue);
			var convertData = function(areaValue) {
				var res = [];
				for(var i = 0; i < areaValue.length; i++) {
					// var geoCoord = geoCoordMap[data[i].name];
					mapData.forEach((v) => {
						if(v.name == areaValue[i].name) {
							res.push({
								name: areaValue[i].name,
								value: v.cp.concat(areaValue[i].value)
							});
						}
					});
				}
				console.log('res',res);
				return res;
			};
			var option = {
				title: {
					text: '测试地图',
					left: 'center',
				},
				tooltip: {
					trigger: 'item',
					formatter: '{b}<br/>{c}'
				},
				geo: {
					show: true,
					map: 'china',
					label: {
						normal: {
							show: true,
							textStyle:{
								color:'#fff'
							}
						},
						emphasis: {
							show: true
						}
					},
					roam: false,   // 是否可以移动地图
					itemStyle: {
						normal: {
							areaColor: '#031525',
							borderColor: '#3B5077'
						},
						emphasis: {
							areaColor: '#2B91B7'
						}
					},
					zoom: 1.2
				},
//				series: [
//					/*{
//					  name: '地区测试数据',
//					  type: 'map',
//					  mapType: 'china', // 自定义扩展图表类型
//					  // geoIndex: 0,
//					  // aspectScale: 0.75, // 长宽比
//					  itemStyle:{
//					    normal:{label:{show:true}},
//					    emphasis:{label:{show:true}}
//					  },
//					  data: areaValue
//					},*/
//					{
//						name: 'pm2.5',
//						type: 'scatter',
//						// 指定坐标系
//						coordinateSystem: 'geo',
//						data: convertData(data),
////						根据值设置symbolSize大小
//						symbolSize: function(val) {
//							console.log('val:',val);
//							return val[2] / 2000;
//						},
//						// 固定大小
////						symbolSize:100,
//						label: {
//							normal: {
//								formatter: '{b}',
//								position: 'right',
//								show: false
//							},
//							emphasis: {
//								show: true
//							}
//						},
//						itemStyle: {
//							normal: {
//								color: '#ddb926'
//							}
//						}
//					},
////					{
////						name: '点',
////						type: 'scatter',
////						coordinateSystem: 'geo',
////						symbol: 'pin',
////						symbolSize: function(val) {
////							const a = (maxSize4Pin - minSize4Pin) / (max - min);
////							let b = minSize4Pin - a * min;
////							b = maxSize4Pin - a * max;
////							return a * val[2] + b;
////						},
////						label: {
////							normal: {
////								show: true,
////								textStyle: {
////									color: '#fff',
////									fontSize: 9
////								}
////							}
////						},
////						itemStyle: {
////							normal: {
////								color: '#F62157' // 标志颜色
////							}
////						},
////						zlevel: 6,
////						data: convertData(data)
////					}
//				]
			}
			myChart.setOption(option);
			window.onresize = myChart.resize;
		});
	</script>

</html>